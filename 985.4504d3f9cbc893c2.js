"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[985],{985:(x,g,a)=>{a.r(g),a.d(g,{SearchScreenPage:()=>O});var _=a(467),e=a(3953),p=a(177),l=a(4341),d=a(1019),u=a(3724),h=a(5329),f=a(9520),b=a(2672),P=a(8986);function M(s,c){1&s&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275text(1," Date is required. "),e.\u0275\u0275elementEnd())}function C(s,c){1&s&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275text(1," Time is required. "),e.\u0275\u0275elementEnd())}function v(s,c){if(1&s&&(e.\u0275\u0275elementStart(0,"div",23),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&s){const m=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275textInterpolate1(" ",m.errorMessage," ")}}let O=(()=>{var s;class c{constructor(t,n,r,o,i){this.router=t,this.modalCtrl=n,this.commonService=r,this.localStr=o,this.handleData=i,this.routes=(0,e.inject)(u.Ix),this.allRideLists=[],this.time="",this.date="",this.passengers=1,this.isInputRequired=!0}ngOnInit(){this.loadAllRides();const t=new Date;this.currentDate=t.toISOString().split("T")[0],this.currentTime=t.toISOString().split("T")[1],this.minDate=this.currentDate,this.date=this.minDate;const n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");this.time=`${n}:${r}`,console.log("this.time === ",this.time)}loadAllRides(){var t=this;return(0,_.A)(function*(){yield t.handleData.getData();const r=t.handleData.getAllRideLists().filter(o=>"created"===o.status);t.rideList=r,console.log("this.rideLists ",t.rideList)})()}onLocationsChanged(t){this.from=t.from,this.to=t.to}search(){if(this.onLocationsChanged({from:this.from,to:this.to}),!this.date||!this.time||this.passengers<=0||!this.from||!this.to)return void(this.errorMessage="Please fill in all required fields.");const t={date:this.date,time:this.time,passengers:this.passengers,from:this.from,to:this.to};console.log("this.time === ",this.time),this.filteredRides=this.rideList.filter(n=>{const r=n.date>=t.date,o=n.from.toLowerCase()===t.from.toLowerCase(),i=n.to.toLowerCase()===t.to.toLowerCase();return r&&o&&i&&n.seatAvl>=t.passengers}),this.router.navigate(["/home"],{state:{searchData:t,filteredRides:this.filteredRides}})}incPassengers(){this.passengers<7&&this.passengers++}decPassengers(){this.passengers>1&&this.passengers--}cancel(){this.modal.dismiss(null,"cancel")}confirm(){const t=Number(this.passengers),n=document.getElementById("errorHere");!isNaN(t)&&t>0&&t<=6?this.modal.dismiss(this.passengers,"confirm"):n&&(n.textContent=isNaN(t)?"Please enter a valid number of passengerss.":t<=0?"The number of passengerss must be greater than 0.":"The number of passengerss must be less than or equal to 6.")}}return(s=c).\u0275fac=function(t){return new(t||s)(e.\u0275\u0275directiveInject(u.Ix),e.\u0275\u0275directiveInject(d.W3),e.\u0275\u0275directiveInject(f.h),e.\u0275\u0275directiveInject(b.s),e.\u0275\u0275directiveInject(P.K))},s.\u0275cmp=e.\u0275\u0275defineComponent({type:s,selectors:[["app-search-screen"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(d.Sb,5),2&t){let r;e.\u0275\u0275queryRefresh(r=e.\u0275\u0275loadQuery())&&(n.modal=r.first)}},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:38,vars:11,consts:[["rideForm","ngForm"],["dateField","ngModel"],["timeField","ngModel"],[3,"translucent"],["slot","start"],["defaultHref","/welcome"],[1,"main"],[1,"para-box"],[1,"ion-text-center"],[1,"main-1"],[3,"locationsChanged"],[1,"main-2"],[1,"custom-date-container"],["type","date","name","date","required","",1,"date",3,"ngModelChange","ngModel","min"],["class","error-message",4,"ngIf"],[1,"custom-time-container"],["type","time","name","time","required","",1,"time",3,"ngModelChange","ngModel"],["size","12",1,"seatAvl","formInput"],["type","number",3,"value"],[1,"decBtn",3,"click","disabled"],[3,"click","disabled"],["size","12","sizeLg","6",1,"search-box","btn-box"],["expand","block",1,"login",3,"click","disabled"],[1,"error-message"]],template:function(t,n){if(1&t){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-header",3)(1,"ion-toolbar")(2,"ion-buttons",4),e.\u0275\u0275element(3,"ion-back-button",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5,"Find Your Ride"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"ion-content")(7,"ion-row")(8,"div",6)(9,"div",7)(10,"h4",8),e.\u0275\u0275text(11," Enter your ride details and find your match! "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(12,"div",9)(13,"form",null,0)(15,"app-travel-from-to",10),e.\u0275\u0275listener("locationsChanged",function(i){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(n.onLocationsChanged(i))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",11)(17,"div",12)(18,"input",13,1),e.\u0275\u0275twoWayListener("ngModelChange",function(i){return e.\u0275\u0275restoreView(r),e.\u0275\u0275twoWayBindingSet(n.date,i)||(n.date=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(20,M,2,0,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(21,"div",15)(22,"input",16,2),e.\u0275\u0275twoWayListener("ngModelChange",function(i){return e.\u0275\u0275restoreView(r),e.\u0275\u0275twoWayBindingSet(n.time,i)||(n.time=i),e.\u0275\u0275resetView(i)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,C,2,0,"div",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(25,"ion-col",17)(26,"p"),e.\u0275\u0275text(27," Passengers "),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(28,"input",18),e.\u0275\u0275elementStart(29,"div")(30,"ion-button",19),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(n.decPassengers())}),e.\u0275\u0275text(31,"-"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(32,"ion-button",20),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(n.incPassengers())}),e.\u0275\u0275text(33,"+"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(34,v,2,1,"div",14),e.\u0275\u0275elementStart(35,"div",21)(36,"ion-button",22),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(r),e.\u0275\u0275resetView(n.search())}),e.\u0275\u0275text(37," Search "),e.\u0275\u0275elementEnd()()()()()()()}if(2&t){const r=e.\u0275\u0275reference(14),o=e.\u0275\u0275reference(19),i=e.\u0275\u0275reference(23);e.\u0275\u0275property("translucent",!0),e.\u0275\u0275advance(18),e.\u0275\u0275twoWayProperty("ngModel",n.date),e.\u0275\u0275property("min",n.minDate),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",o.invalid&&o.touched),e.\u0275\u0275advance(2),e.\u0275\u0275twoWayProperty("ngModel",n.time),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",i.invalid&&i.touched),e.\u0275\u0275advance(4),e.\u0275\u0275property("value",n.passengers),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.passengers<=1),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",n.passengers>=7),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",n.errorMessage),e.\u0275\u0275advance(2),e.\u0275\u0275property("disabled",r.invalid)}},dependencies:[d.el,d.QW,d.Jm,d.hU,d.ln,d.W9,d.eU,d.BC,d.ai,p.MD,p.bT,l.YN,l.qT,l.me,l.BC,l.cb,l.YS,l.vS,l.cV,h.N],styles:['@charset "UTF-8";  .input-fill-outline.sc-ion-input-md-h .input-wrapper.sc-ion-input-md{border-bottom:none;background:#ddf7f7b3}ion-datetime-button[_ngcontent-%COMP%]::part(button){--padding-left: 5rem !important;--background: #000}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;padding:0rem;margin:auto;max-width:370px}.main[_ngcontent-%COMP%]   .para-box[_ngcontent-%COMP%]{padding:0 1rem}.main-1[_ngcontent-%COMP%]{margin:1rem}.main-2[_ngcontent-%COMP%]{display:flex;margin-top:1rem;margin-bottom:1rem;flex-wrap:wrap;gap:.3rem}.flex-box[_ngcontent-%COMP%]{display:flex;border-radius:19px;align-items:center;padding-left:1rem;color:#000}.counter-input[_ngcontent-%COMP%]{padding:1rem}.counter-input[_ngcontent-%COMP%]:nth-child(3){border-right:2px solid #BAD4DA}button.btn-btn[_ngcontent-%COMP%]{border-radius:12px;color:#000;width:-moz-fit-content;width:fit-content;background:#ddf7f7b3;border:2px solid #BAD4DA;flex-basis:26rem;flex-grow:1}.flex-box[_ngcontent-%COMP%]{padding-left:1rem;justify-content:space-around}.btn-box[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{--background: #33A05E;--border-radius: 50px;text-transform:capitalize;height:3rem;font-size:19px;font-weight:600;margin:auto}.sc-ion-input-md-h[_ngcontent-%COMP%]{min-height:0px;padding:0!important}button.togg-btn-1[_ngcontent-%COMP%]{display:flex;background:transparent;position:relative;top:-1.3rem;float:right;right:0rem}  .input-bottom.sc-ion-input-md{border-top:none!important}.date[_ngcontent-%COMP%], .time[_ngcontent-%COMP%]{border:2px solid #BAD4DA;padding:.6rem 1rem .6rem 0rem;border-radius:15px;color:#000;position:relative;background:#ddf7f7b3}.time[_ngcontent-%COMP%]{padding-left:.6rem}.date[_ngcontent-%COMP%]:before, .time[_ngcontent-%COMP%]:before{content:"\\1f4c5";position:absolute;right:14px;top:50%;transform:translateY(-50%);font-size:1.1em;color:#3498db;pointer-events:none}.time[_ngcontent-%COMP%]:before{content:"\\1f554"}button.btn-btn[_ngcontent-%COMP%]{width:100%;margin-top:.7rem}.togg-btn[_ngcontent-%COMP%]{border-bottom:2px solid #BAD4DA}.counter-input[_ngcontent-%COMP%]{padding:1rem;font-weight:400;font-size:16px;color:#000}  .input-highlight.sc-ion-input-md{border-bottom:none;background:transparent!important}.input-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.icon[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:8px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]{background:transparent;border:none;width:100%;text-align:center}input[_ngcontent-%COMP%]:focus{outline:none;text-align:center}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}#errorHere[_ngcontent-%COMP%]{color:red;padding:0}  .addPassanger{--backdrop-opacity: .5 !important;--border-radius: 8px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px)}  .addPassanger .modalCont{display:flex;height:100%;flex-direction:column;justify-content:center}.seatAvl[_ngcontent-%COMP%]{margin:auto;margin-top:1rem;display:flex;gap:.5rem;align-items:center}.seatAvl[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;text-align:left;max-width:65px!important;padding:0;margin:0;border:none}.seatAvl[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: transparent;--box-shadow: none;color:#000}.seatAvl[_ngcontent-%COMP%]   .decBtn[_ngcontent-%COMP%]{border-right:4px solid white}.error-message[_ngcontent-%COMP%]{color:red;font-size:14px;margin-top:10px}.formInput[_ngcontent-%COMP%]{border:2px solid #BAD4DA;padding:.6rem 1rem;border-radius:15px;color:#000;background:#ddf7f7b3}.formInput[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;max-width:-webkit-fill-available;padding:0;margin:0;border:none}']}),c})()}}]);