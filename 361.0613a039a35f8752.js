"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[361],{3361:(H,O,a)=>{a.r(O),a.d(O,{HomePage:()=>R});var _=a(467),e=a(3953),m=a(177),y=a(4341),r=a(1019),p=a(3724),h=a(9520),x=a(2672),v=a(8986);let b=(()=>{var o;class d{constructor(t,n,i,s,g){this.router=t,this.modalCtrl=n,this.commonService=i,this.localStr=s,this.handleData=g}ngOnInit(){console.log("userInfo",this.userInfo),this.dateInput=this.userInfo.date,this.calculateEndTime(this.userInfo)}calculateEndTime(t){const n=t.time,i=t.duration,[s,g]=n.split(":").map(Number),f=i.match(/(\d+)\s*day/),C=i.match(/(\d+)\s*hour/),l=i.match(/(\d+)\s*mins/),D=f?parseInt(f[1],10):0;let P=s+(C?parseInt(C[1],10):0),u=g+(l?parseInt(l[1],10):0),M=D;u>=60&&(u-=60,P+=1),P>=24&&(P-=24,M+=1);const w=P.toString().padStart(2,"0"),I=u.toString().padStart(2,"0");return M>0?`${M} day(s) ${w}:${I}`:`${w}:${I}`}}return(o=d).\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(p.Ix),e.\u0275\u0275directiveInject(r.W3),e.\u0275\u0275directiveInject(h.h),e.\u0275\u0275directiveInject(x.s),e.\u0275\u0275directiveInject(v.K))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-ride-card"]],inputs:{userInfo:"userInfo"},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:32,vars:6,consts:[[1,"newcard"],[1,"primary","top"],[1,"showSeat"],[1,"middlePart"],[1,"userdetail"],["alt","User Picture",3,"src"],[1,"username"],[1,"ion-align-items-end","ion-justify-content-center"],[1,"gold-rush"],[1,"d-flex"],["name","star"],[1,"d-flex","ion-justify-content-end"],["name","car-sport"],[1,"ion-justify-content-between","ion-padding-horizontal","ion-padding-bottom","bottomPnl"],["name","timer"],[1,"ion-text-end","wallet"],["name","wallet"],[1,"primary","bottom"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"ion-card",0)(1,"ion-row",1)(2,"div",2),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"ion-row",3)(5,"div",4),e.\u0275\u0275element(6,"img",5),e.\u0275\u0275elementStart(7,"p",6)(8,"strong"),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(10,"ion-row",7)(11,"ion-col",8)(12,"p",9),e.\u0275\u0275element(13,"ion-icon",10),e.\u0275\u0275text(14," 4.5"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(15,"ion-col")(16,"p",11),e.\u0275\u0275element(17,"ion-icon",12),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(19,"ion-row",13)(20,"ion-col")(21,"p",9),e.\u0275\u0275element(22,"ion-icon",14),e.\u0275\u0275text(23),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"ion-col",15)(25,"p",11),e.\u0275\u0275element(26,"ion-icon",16),e.\u0275\u0275text(27),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(28,"ion-row",17)(29,"p")(30,"strong"),e.\u0275\u0275text(31,"view details"),e.\u0275\u0275elementEnd()()()()),2&t&&(e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",n.userInfo.seatAvl," seat left "),e.\u0275\u0275advance(3),e.\u0275\u0275property("src",n.userInfo.riderpicture?n.userInfo.riderpicture:"../../../assets/icon/user.png",e.\u0275\u0275sanitizeUrl),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",n.userInfo.ridername,""),e.\u0275\u0275advance(9),e.\u0275\u0275textInterpolate1(" ",n.userInfo.vehicle,""),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate1(" ",n.userInfo.time,""),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate1(" ",n.userInfo.price," Rs"))},dependencies:[r.hU,r.ln,r.iq,r.b_,m.MD],styles:["ion-card[_ngcontent-%COMP%]{box-shadow:#0003 0 3px 25px 2px,#00000024 1px 3px 7px -2px,#0000001f -12px 12px 21px}ion-card[_ngcontent-%COMP%]   .travelDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child{font-weight:700;font-size:12px;color:#33a05e;padding-left:1.7rem}ion-card[_ngcontent-%COMP%]   .travelDetails[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{color:#bad4da;font-weight:700;font-size:12px;padding-left:1.7rem}ion-card[_ngcontent-%COMP%]   .travelDetails[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]{font-size:16px;margin-top:0;margin-bottom:0;display:flex;gap:.2rem;align-items:center}ion-card[_ngcontent-%COMP%]   .travelDetails[_ngcontent-%COMP%]   .location[_ngcontent-%COMP%]   .locationIcon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem;color:#d3e3e7}ion-card[_ngcontent-%COMP%]   .timeSection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}ion-card[_ngcontent-%COMP%]   .timeSection[_ngcontent-%COMP%]   .totalTimeTakenArea[_ngcontent-%COMP%]{width:8rem;height:-moz-fit-content;height:fit-content;position:relative;display:flex;justify-content:center}ion-card[_ngcontent-%COMP%]   .timeSection[_ngcontent-%COMP%]   .totalTimeTakenArea[_ngcontent-%COMP%]   .timeBox[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;background-color:#a9aeb7;padding:.1rem .5rem;border-radius:1rem;color:#33666c;font-size:11px}ion-card[_ngcontent-%COMP%]   .timeSection[_ngcontent-%COMP%]   .totalTimeTakenArea[_ngcontent-%COMP%]   .arrowIcon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;width:100%;left:0;height:1rem;top:10%;z-index:-1}ion-card[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:.1rem;background-color:#d3e3e7;width:100%}ion-card[_ngcontent-%COMP%]   .userInfo[_ngcontent-%COMP%]{display:flex;gap:1rem}ion-card[_ngcontent-%COMP%]   .userInfo[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{--border-radius: 15%}ion-card[_ngcontent-%COMP%]   .userInfo[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around}ion-card[_ngcontent-%COMP%]   .userInfo[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11px}ion-card[_ngcontent-%COMP%]   .userInfo[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:15px}ion-card[_ngcontent-%COMP%]   .seatPriceSection[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end}ion-card[_ngcontent-%COMP%]   .seatPriceSection[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{padding:.1rem .5rem;background-color:#279657;color:#fff;font-size:16px;border-radius:1rem}ion-card[_ngcontent-%COMP%]   .seatPriceSection[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{background-color:red;color:#fff;font-size:12px;padding:.2rem .7rem;border-radius:1rem}.newcard[_ngcontent-%COMP%]   .primary[_ngcontent-%COMP%]{background:#0075fd}.newcard[_ngcontent-%COMP%]   .top.primary[_ngcontent-%COMP%]{position:relative;min-height:5rem}.newcard[_ngcontent-%COMP%]   .top.primary[_ngcontent-%COMP%]   .showSeat[_ngcontent-%COMP%]{position:absolute;background-color:#3995ff;color:#fff;top:0;left:0;border-radius:0 0 1rem;padding:.4rem .8rem}.newcard[_ngcontent-%COMP%]   .userdetail[_ngcontent-%COMP%]{text-align:center;width:100%}.newcard[_ngcontent-%COMP%]   .userdetail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:4rem;width:4rem;border-radius:50%;position:relative;z-index:1;background-color:#fff;margin-top:-2rem;box-shadow:1px 1px 1px red}.newcard[_ngcontent-%COMP%]   .middlePart[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%], .newcard[_ngcontent-%COMP%]   .bottomPnl[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.2rem}.newcard[_ngcontent-%COMP%]   .img-person[_ngcontent-%COMP%]{font-size:2rem}.newcard[_ngcontent-%COMP%]   .userdetail[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%], .newcard[_ngcontent-%COMP%]   .middlePart[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:capitalize}.newcard[_ngcontent-%COMP%]   .gold-rush[_ngcontent-%COMP%]{color:#f89d1c!important}.newcard[_ngcontent-%COMP%]   .gold-rush[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{border-right:1px solid black}.newcard[_ngcontent-%COMP%]   .wallet[_ngcontent-%COMP%]{color:green}.newcard[_ngcontent-%COMP%]   .middlePart[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.newcard[_ngcontent-%COMP%]   .middlePart[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.newcard[_ngcontent-%COMP%]   .bottomPnl[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5rem}.newcard[_ngcontent-%COMP%]   .middlePart[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0;padding-left:.2rem;padding-right:.2rem}.newcard[_ngcontent-%COMP%]   .middlePart[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{width:70%;margin:auto;margin-top:-.5rem;margin-bottom:1rem}.newcard[_ngcontent-%COMP%]   .bottom.primary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;text-align:center;width:100%}"]}),d})();const S=()=>["/search"];function z(o,d){if(1&o){const c=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"app-ride-card",15),e.\u0275\u0275listener("click",function(){const n=e.\u0275\u0275restoreView(c).index,i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.rideDetailView(n))}),e.\u0275\u0275elementEnd()}2&o&&e.\u0275\u0275property("userInfo",d.$implicit)}function k(o,d){if(1&o&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,z,1,1,"app-ride-card",14),e.\u0275\u0275elementEnd()),2&o){const c=e.\u0275\u0275nextContext();e.\u0275\u0275advance(),e.\u0275\u0275property("ngForOf",c.filteredRides)}}function E(o,d){1&o&&(e.\u0275\u0275elementStart(0,"div",16),e.\u0275\u0275element(1,"ion-icon",17),e.\u0275\u0275elementStart(2,"p"),e.\u0275\u0275text(3,"No rides available at the moment."),e.\u0275\u0275elementEnd()())}let R=(()=>{var o;class d{constructor(t){this.alertController=t,this.handleData=(0,e.inject)(v.K),this.LocalStr=(0,e.inject)(x.s),this.commonService=(0,e.inject)(h.h),this.router=(0,e.inject)(p.Ix),this.isLogeedIn=!1,this.filteredRides=[]}ngOnInit(){this.currentUserDocId=this.LocalStr.getItem("currentUserDocId"),this.loadAllRides(),console.log("filteredRides === ",this.filteredRides)}loadAllRides(){var t=this;return(0,_.A)(function*(){const n=t.router.getCurrentNavigation();n&&n.extras.state?(n.extras.state.filteredRides&&(t.filteredRides=n.extras.state.filteredRides,console.log("Filtered Rides:",t.filteredRides)),n.extras.state.searchData&&(t.searchData=n.extras.state.searchData)):console.log("No filtered rides or search data found.")})()}alertBox(t,n,i,s){var g=this;return(0,_.A)(function*(){const f=(null==i?void 0:i.map(l=>({text:l.text,handler:()=>{l.handler&&l.handler()}})))||["OK"];yield(yield g.alertController.create({header:n,subHeader:s,message:t,buttons:f})).present()})()}rideDetailView(t){if(null!=this.currentUserDocId){const i={queryParams:{ride:JSON.stringify(this.filteredRides[t])}};this.router.navigate(["/ride-detail-view"],i)}else this.alertBox("Please Login First to check the details","Login error.",[{text:"Ok",handler:()=>{this.router.navigate(["/welcome"])}}])}}return(o=d).\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(r.hG))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-home"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:24,vars:7,consts:[["noRidesAvailable",""],[3,"translucent"],[1,"ion-align-items-center","ion-padding-start"],["name","chevron-back-outline","routerLinkActive","router-link-active",1,"backBtnIcon",3,"routerLink"],[1,""],[1,"top-pnl"],["size","12"],[1,"d-flex"],[1,"loc-icon"],["name","location"],[1,"truncated-text"],[1,"line"],["name","pin"],[4,"ngIf","ngIfElse"],[3,"userInfo","click",4,"ngFor","ngForOf"],[3,"click","userInfo"],[1,"no-rides-message"],["name","sad-outline"]],template:function(t,n){if(1&t&&(e.\u0275\u0275elementStart(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-row",2),e.\u0275\u0275element(3,"ion-icon",3),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5,"Select your Ride"),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275elementStart(6,"ion-content",4)(7,"ion-row",5)(8,"ion-col",6)(9,"div",7)(10,"div",8),e.\u0275\u0275element(11,"ion-icon",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"p",10),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275element(14,"div",11),e.\u0275\u0275elementStart(15,"ion-col",6)(16,"div",7)(17,"div",8),e.\u0275\u0275element(18,"ion-icon",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"p",10),e.\u0275\u0275text(20),e.\u0275\u0275elementEnd()()()(),e.\u0275\u0275template(21,k,2,1,"div",13)(22,E,4,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&t){const i=e.\u0275\u0275reference(23);e.\u0275\u0275property("translucent",!0),e.\u0275\u0275advance(3),e.\u0275\u0275property("routerLink",e.\u0275\u0275pureFunction0(6,S)),e.\u0275\u0275advance(10),e.\u0275\u0275textInterpolate(n.searchData.from),e.\u0275\u0275advance(7),e.\u0275\u0275textInterpolate(n.searchData.to),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",n.filteredRides.length>0)("ngIfElse",i)}},dependencies:[r.iq,r.hU,r.ln,r.W9,r.eU,r.BC,r.ai,m.MD,m.Sq,m.bT,y.YN,b,p.Wk,p.wQ],styles:[".filterArea[_ngcontent-%COMP%]{max-width:-moz-fit-content;max-width:fit-content}.filterArea[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.8rem;display:flex;align-items:center;border-radius:8px;background-color:#dceef2;width:-moz-fit-content;width:fit-content}.filterArea[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem}.backBtn[_ngcontent-%COMP%]{max-width:2rem;display:flex;align-items:center}.backBtn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:4.5rem}.backBtnIcon[_ngcontent-%COMP%]{font-size:1.5rem}.loc-icon[_ngcontent-%COMP%]{background-color:#0075fd;border-radius:1rem;height:2rem;width:2rem;text-align:center;align-content:center}.loc-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff;font-size:1.25rem;margin-top:.25rem}.top-pnl[_ngcontent-%COMP%]   .d-flex[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.top-pnl[_ngcontent-%COMP%]{border-bottom:1px solid gray;padding:0 1rem;position:relative;box-shadow:1px 0 2px;position:sticky;top:0;z-index:1;background-color:#fff}.no-rides-message[_ngcontent-%COMP%]{text-align:center;color:#888;padding:20px}.no-rides-message[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2em;color:#aaa}.truncated-text[_ngcontent-%COMP%]{width:275px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.line[_ngcontent-%COMP%]{background:#0075fd;width:.25rem;height:2.5rem;position:absolute;top:2.8rem;left:2.2rem}"]}),d})()}}]);