"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[534],{1534:(S,m,l)=>{l.r(m),l.d(m,{MyWalletPage:()=>D});var p=l(467),d=l(177),_=l(4341),a=l(1019),g=l(5339),e=l(3953),u=l(3724),h=l(9520),C=l(2672),f=l(8986);const x=["modal"];function b(o,s){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-datetime",31),e.\u0275\u0275listener("ionChange",function(n){e.\u0275\u0275restoreView(r);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onDateTimeChange(n,"from"))}),e.\u0275\u0275elementEnd()}}function M(o,s){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-datetime",32),e.\u0275\u0275listener("ionChange",function(n){e.\u0275\u0275restoreView(r);const i=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(i.onDateTimeChange(n,"to"))}),e.\u0275\u0275elementEnd()}}function y(o,s){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-content",17)(1,"p"),e.\u0275\u0275text(2,"Filter by Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"div",18)(4,"p",19),e.\u0275\u0275text(5,"From:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(6,"ion-datetime-button",20),e.\u0275\u0275elementStart(7,"ion-modal",21),e.\u0275\u0275template(8,b,1,0,"ng-template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(9,"ion-icon",22),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",18)(11,"p",19),e.\u0275\u0275text(12,"To:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(13,"ion-datetime-button",23),e.\u0275\u0275elementStart(14,"ion-modal",21),e.\u0275\u0275template(15,M,1,0,"ng-template"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(16,"ion-icon",24),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"p"),e.\u0275\u0275text(18,"Filter by Type"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",25)(20,"button",26),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.filterByType("credit"))}),e.\u0275\u0275text(21," Credited "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.filterByType("debit"))}),e.\u0275\u0275text(23," Debited "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(24,"ion-col")(25,"p"),e.\u0275\u0275text(26,"Filter by Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(27,"ion-toolbar",28)(28,"ion-searchbar",29),e.\u0275\u0275listener("ionInput",function(n){e.\u0275\u0275restoreView(r);const i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.filterByAmount(n))}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(29,"ion-button",30),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(r);const n=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(n.filterAmount())}),e.\u0275\u0275text(30,"search"),e.\u0275\u0275elementEnd()()()()}2&o&&(e.\u0275\u0275advance(7),e.\u0275\u0275property("keepContentsMounted",!0),e.\u0275\u0275advance(7),e.\u0275\u0275property("keepContentsMounted",!0))}function v(o,s){1&o&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",39),e.\u0275\u0275element(2,"img",40),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd())}function P(o,s){1&o&&(e.\u0275\u0275elementStart(0,"div",39),e.\u0275\u0275element(1,"img",41),e.\u0275\u0275elementEnd())}function T(o,s){if(1&o){const r=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",30),e.\u0275\u0275listener("click",function(){const n=e.\u0275\u0275restoreView(r).index,i=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(i.walletHistoryToRecipt(n))}),e.\u0275\u0275elementStart(1,"ion-row")(2,"ion-col",33)(3,"ion-list",34)(4,"ion-item",35),e.\u0275\u0275template(5,v,3,0,"ng-container",36)(6,P,2,0,"ng-template",null,0,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementStart(8,"ion-label",37)(9,"h3"),e.\u0275\u0275text(10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"p"),e.\u0275\u0275text(12),e.\u0275\u0275pipe(13,"date"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(14,"ion-text",38),e.\u0275\u0275text(15),e.\u0275\u0275elementEnd()()()()()()}if(2&o){const r=s.$implicit,t=e.\u0275\u0275reference(7);e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf","credit"===r.type)("ngIfElse",t),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(r.paidTo),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind2(13,5,r.date,"dd MMM, yyyy, h:mm a")),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" \u20b9 ",r.amount.toFixed(2)," ")}}let D=(()=>{var o;class s{constructor(t,n,i,c,E,O,w){this.router=t,this.cdr=n,this.commonService=i,this.localStr=c,this.handleData=E,this.modalCtrl=O,this.popoverController=w,this.transactionList=[],this.filteredData=[],this.originalData=[],this.selectedFromDateTime=null,this.selectedToDateTime=null,this.selectedType=null,this.isModalOpen=!1,this.searchTerm="",this.amountSearchTerm=""}ngOnInit(){this.handleData.userExists(this.commonService.currentUserEmail).then(n=>{this.currentUserData=n.data,this.transactionList=this.currentUserData.wallet.transactionsList,this.originalData=[...this.transactionList],this.filteredData=[...this.transactionList]})}onDateTimeChange(t,n){const i=t.detail.value?new Date(t.detail.value).toISOString().slice(0,10):null;console.log("selectedDate === ",i),"from"===n?(this.selectedFromDateTime=i,console.log("this.selectedFromDateTime === ",this.selectedFromDateTime)):(this.selectedToDateTime=i,console.log("this.selectedToDateTime === ",this.selectedToDateTime)),this.filterByDate()}filterByDate(){this.filteredData=this.originalData.filter(t=>{const n=new Date(t.date),i=this.selectedFromDateTime?new Date(this.selectedFromDateTime):null,c=this.selectedToDateTime?new Date(this.selectedToDateTime):null;return(!i||n>=i)&&(!c||n<=c)})}filterByType(t){this.selectedType=t,this.applyFilters()}filterByAmount(t){this.amountSearchTerm=t.target.value}filterAmount(){this.applyFilters(),this.popoverController.dismiss()}applyFilters(){this.filteredData=this.originalData.filter(t=>{const n=!this.selectedType||t.type===this.selectedType;console.log("isTypeMatch === ",n);const i=t.paidTo.toLowerCase().includes(this.searchTerm.toLowerCase());console.log(this.filteredData);const c=!this.amountSearchTerm||t.amount.toString().includes(this.amountSearchTerm);return n&&i&&c})}filterByName(t){this.searchTerm=t.target.value,this.applyFilters()}walletHistoryToRecipt(t){var n=this;return(0,p.A)(function*(){const i=n.filteredData[t];(yield n.modalCtrl.create({component:g.f,cssClass:["ReciptComponentCss","ion-padding-horizontal"],componentProps:{userpaymentDetails:i},showBackdrop:!0})).present()})()}}return(o=s).\u0275fac=function(t){return new(t||o)(e.\u0275\u0275directiveInject(u.Ix),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(h.h),e.\u0275\u0275directiveInject(C.s),e.\u0275\u0275directiveInject(f.K),e.\u0275\u0275directiveInject(a.W3),e.\u0275\u0275directiveInject(a.IE))},o.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-my-wallet"]],viewQuery:function(t,n){if(1&t&&e.\u0275\u0275viewQuery(x,7),2&t){let i;e.\u0275\u0275queryRefresh(i=e.\u0275\u0275loadQuery())&&(n.modal=i.first)}},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:25,vars:2,consts:[["debitIcon",""],[3,"translucent"],["slot","start"],[1,"main-content"],[1,"searchSection"],["size","12"],[1,"search-type"],[1,"search-items"],["placeholder","Search by name",3,"ionInput"],["id","click-trigger",1,"filter-btn"],[1,"default-btn"],["width","30","height","21","viewBox","0 0 20 21","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M5.14169 15.5C5.31386 15.0121 5.63314 14.5896 6.05552 14.2907C6.4779 13.9918 6.98259 13.8313 7.50002 13.8313C8.01745 13.8313 8.52214 13.9918 8.94452 14.2907C9.3669 14.5896 9.68619 15.0121 9.85835 15.5H18.3334V17.1667H9.85835C9.68619 17.6547 9.3669 18.0772 8.94452 18.3761C8.52214 18.6749 8.01745 18.8354 7.50002 18.8354C6.98259 18.8354 6.4779 18.6749 6.05552 18.3761C5.63314 18.0772 5.31386 17.6547 5.14169 17.1667H1.66669V15.5H5.14169ZM10.1417 9.66672C10.3139 9.17877 10.6331 8.75624 11.0555 8.45737C11.4779 8.1585 11.9826 7.99801 12.5 7.99801C13.0174 7.99801 13.5221 8.1585 13.9445 8.45737C14.3669 8.75624 14.6862 9.17877 14.8584 9.66672H18.3334V11.3334H14.8584C14.6862 11.8213 14.3669 12.2439 13.9445 12.5427C13.5221 12.8416 13.0174 13.0021 12.5 13.0021C11.9826 13.0021 11.4779 12.8416 11.0555 12.5427C10.6331 12.2439 10.3139 11.8213 10.1417 11.3334H1.66669V9.66672H10.1417ZM5.14169 3.83338C5.31386 3.34544 5.63314 2.92291 6.05552 2.62404C6.4779 2.32517 6.98259 2.16467 7.50002 2.16467C8.01745 2.16467 8.52214 2.32517 8.94452 2.62404C9.3669 2.92291 9.68619 3.34544 9.85835 3.83338H18.3334V5.50005H9.85835C9.68619 5.98799 9.3669 6.41052 8.94452 6.70939C8.52214 7.00826 8.01745 7.16876 7.50002 7.16876C6.98259 7.16876 6.4779 7.00826 6.05552 6.70939C5.63314 6.41052 5.31386 5.98799 5.14169 5.50005H1.66669V3.83338H5.14169ZM7.50002 5.50005C7.72103 5.50005 7.933 5.41225 8.08928 5.25597C8.24556 5.09969 8.33335 4.88773 8.33335 4.66671C8.33335 4.4457 8.24556 4.23374 8.08928 4.07746C7.933 3.92118 7.72103 3.83338 7.50002 3.83338C7.27901 3.83338 7.06705 3.92118 6.91077 4.07746C6.75448 4.23374 6.66669 4.4457 6.66669 4.66671C6.66669 4.88773 6.75448 5.09969 6.91077 5.25597C7.06705 5.41225 7.27901 5.50005 7.50002 5.50005ZM12.5 11.3334C12.721 11.3334 12.933 11.2456 13.0893 11.0893C13.2456 10.933 13.3334 10.7211 13.3334 10.5C13.3334 10.279 13.2456 10.0671 13.0893 9.91079C12.933 9.75451 12.721 9.66672 12.5 9.66672C12.279 9.66672 12.067 9.75451 11.9108 9.91079C11.7545 10.0671 11.6667 10.279 11.6667 10.5C11.6667 10.7211 11.7545 10.933 11.9108 11.0893C12.067 11.2456 12.279 11.3334 12.5 11.3334ZM7.50002 17.1667C7.72103 17.1667 7.933 17.0789 8.08928 16.9226C8.24556 16.7664 8.33335 16.5544 8.33335 16.3334C8.33335 16.1124 8.24556 15.9004 8.08928 15.7441C7.933 15.5878 7.72103 15.5 7.50002 15.5C7.27901 15.5 7.06705 15.5878 6.91077 15.7441C6.75448 15.9004 6.66669 16.1124 6.66669 16.3334C6.66669 16.5544 6.75448 16.7664 6.91077 16.9226C7.06705 17.0789 7.27901 17.1667 7.50002 17.1667Z","fill","#191919"],[1,"text","text-color"],["trigger","click-trigger","triggerAction","click"],[1,"ion-fx","ion-justify-content-between","ion-padding-top","navbar-margin-top"],[3,"click",4,"ngFor","ngForOf"],[1,"ion-padding"],[1,"filter-box"],[1,"para-txt"],["datetime","fromDatetime",1,"date"],[3,"keepContentsMounted"],["name","calendar-outline","type","date",1,"calendar-icon"],["datetime","toDatetime",1,"date"],["name","calendar-outline",1,"calendar-icon"],[1,"credit-debits"],[1,"credit",3,"click"],[1,"debit",3,"click"],[1,"search-items","inputamount"],["placeholder","Search amount",1,"searchamount",3,"ionInput"],[3,"click"],["id","fromDatetime","presentation","date",3,"ionChange"],["id","toDatetime","presentation","date",3,"ionChange"],["size","12",1,""],[1,"ion-no-margin","ion-no-padding"],[1,"ion-no-padding","transaction-card"],[4,"ngIf","ngIfElse"],[1,"ion-padding-start"],[1,"ion-no-padding"],[1,"svgbg"],["src","../../../../assets/images/svgs/credit.svg","alt","Credit",1,"credit-icon"],["src","../../../../assets/images/svgs/debit.svg","alt","Debit",1,"debit-icon"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),e.\u0275\u0275element(3,"ion-menu-button"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5,"Wallet History"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(6,"ion-content")(7,"ion-grid",3)(8,"ion-row",4)(9,"ion-col",5)(10,"div",6)(11,"ion-toolbar",7)(12,"ion-searchbar",8),e.\u0275\u0275listener("ionInput",function(c){return n.filterByName(c)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(13,"button",9)(14,"div",10),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(15,"svg",11),e.\u0275\u0275element(16,"path",12),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(17,"div",13),e.\u0275\u0275text(18,"Filter"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"ion-popover",14),e.\u0275\u0275template(20,y,31,2,"ng-template"),e.\u0275\u0275elementEnd()()()()(),e.\u0275\u0275elementStart(21,"div",15)(22,"h4"),e.\u0275\u0275text(23,"All Transactions"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(24,T,16,8,"div",16),e.\u0275\u0275elementEnd()()),2&t&&(e.\u0275\u0275property("translucent",!0),e.\u0275\u0275advance(24),e.\u0275\u0275property("ngForOf",n.filteredData))},dependencies:[a.CF,a.Jm,a.QW,a.Sb,a.A9,a.K4,a.S1,a.nf,a.lO,a.ln,a.hU,a.iq,a.he,a.IO,a.uz,a.W9,a.eU,a.BC,a.ai,d.MD,d.Sq,d.bT,d.vh,_.YN,a.MC],styles:[".main-content[_ngcontent-%COMP%]{box-sizing:border-box;padding-left:2rem}.searchSection[_ngcontent-%COMP%]{position:fixed;z-index:1;background-color:#fff;width:100%}.search-type[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;max-width:500px;margin-left:-1.5rem!important}button.filter-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;padding:8px 15px 8px 0;border-radius:8px;cursor:pointer;background:transparent;border:1px solid gainsboro}button.filter-btn[_ngcontent-%COMP%]:hover{background-color:#a79e9e2b}  input.searchbar-input.sc-ion-searchbar-md{border-radius:8px;border:1px solid gainsboro;padding-right:2rem}.text[_ngcontent-%COMP%]{padding-left:0rem;font-size:15px;font-weight:500}ion-list.ion-no-margin.md.list-md[_ngcontent-%COMP%]{padding-left:0rem}.filter-box[_ngcontent-%COMP%]{display:flex;align-items:baseline}ion-datetime-button.date.ion-color.ion-color-primary.md[_ngcontent-%COMP%]{flex-basis:21rem;flex-grow:1}p.para-txt[_ngcontent-%COMP%]{flex-basis:5rem;flex-grow:1}ion-modal[_ngcontent-%COMP%] > .ion-page[_ngcontent-%COMP%]{position:relative;contain:layout style;height:100%}  .popover-viewport:has(>ion-content){overflow:hidden;--width: 255px}.credit-debits[_ngcontent-%COMP%]{display:flex;gap:.5rem;padding-top:1.5rem;justify-content:space-around}.credit[_ngcontent-%COMP%]{border:2px solid gainsboro;padding:.5rem;border-radius:8px;background-color:transparent;color:#000;font-size:15px;font-weight:400}.debit[_ngcontent-%COMP%]{border:2px solid gainsboro;padding:1rem;border-radius:8px;background-color:transparent;color:#000;font-size:15px;font-weight:400}.navbar-margin-top[_ngcontent-%COMP%]{margin-top:3rem}.text-color[_ngcontent-%COMP%]{color:#000}ion-popover[_ngcontent-%COMP%]{--width: 300px;--min-width: 200px;--max-width: 500px}ion-toolbar.search-items.toolbar-searchbar.md.in-toolbar[_ngcontent-%COMP%]{width:68%}ion-toolbar.search-items.inputamount.toolbar-searchbar.md.in-toolbar[_ngcontent-%COMP%]{width:95%!important}.filter-box[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px;padding:8px;background-color:#f8f9fa;border-radius:8px;box-shadow:0 2px 4px #0000001a}.para-txt[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#333;font-weight:700}.date[_ngcontent-%COMP%]{color:#fff;padding:8px 16px;border-radius:4px;font-weight:700}.credit-debits[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:16px 0}.credit[_ngcontent-%COMP%], .debit[_ngcontent-%COMP%]{flex:1;margin:0 8px;padding:12px 0;border:none;border-radius:4px;font-size:1rem;font-weight:700;color:#fff;cursor:pointer}.credit[_ngcontent-%COMP%]{background-color:#28a745}.debit[_ngcontent-%COMP%]{background-color:#dc3545}.credit[_ngcontent-%COMP%]:hover, .debit[_ngcontent-%COMP%]:hover{opacity:.9}.inputamount[_ngcontent-%COMP%]{margin-top:16px}.searchamount[_ngcontent-%COMP%]{--background: #e9ecef;--color: #495057;--placeholder-color: #adb5bd;border-radius:4px}.calendar-icon[_ngcontent-%COMP%]{font-size:3rem}.svgbg[_ngcontent-%COMP%]{background-color:#f6f6f6;border-radius:1.5rem;display:flex;padding:.6rem;align-items:center}"]}),s})()}}]);