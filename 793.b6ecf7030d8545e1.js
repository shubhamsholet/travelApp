"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[793],{3793:(b,_,r)=>{r.r(_),r.d(_,{MyWalletPage:()=>w});var m=r(467),d=r(177),p=r(4341),a=r(1019),h=r(5339),t=r(3953),u=r(3724),f=r(9520),M=r(2672),x=r(8986);function C(i,l){1&i&&(t.\u0275\u0275elementContainerStart(0),t.\u0275\u0275elementStart(1,"div",32),t.\u0275\u0275element(2,"img",33),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementContainerEnd())}function P(i,l){1&i&&(t.\u0275\u0275elementStart(0,"div",32),t.\u0275\u0275element(1,"img",34),t.\u0275\u0275elementEnd())}function v(i,l){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275listener("click",function(){const e=t.\u0275\u0275restoreView(n).index,c=t.\u0275\u0275nextContext(2);return t.\u0275\u0275resetView(c.walletToRecipt(e))}),t.\u0275\u0275elementStart(1,"ion-row")(2,"ion-col",24)(3,"ion-list",25)(4,"ion-item",26),t.\u0275\u0275template(5,C,3,0,"ng-container",27)(6,P,2,0,"ng-template",null,0,t.\u0275\u0275templateRefExtractor),t.\u0275\u0275elementStart(8,"ion-label",28)(9,"h3"),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"p"),t.\u0275\u0275text(12),t.\u0275\u0275pipe(13,"date"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(14,"ion-text",29),t.\u0275\u0275text(15),t.\u0275\u0275elementEnd(),t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(16,"svg",30),t.\u0275\u0275element(17,"path",31),t.\u0275\u0275elementEnd()()()()()()}if(2&i){const n=l.$implicit,o=t.\u0275\u0275reference(7),e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(5),t.\u0275\u0275property("ngIf","credit"===n.type)("ngIfElse",o),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate(e.currentUserData.userName),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate(t.\u0275\u0275pipeBind2(13,5,n.date,"dd MMM, yyyy, h:mm a")),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" \u20b9 ",n.amount.toFixed(2)," ")}}function O(i,l){if(1&i){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-content")(1,"ion-grid",4)(2,"div",5)(3,"div",6)(4,"ion-avatar",2),t.\u0275\u0275element(5,"img",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"div",8)(7,"ion-card-title",9),t.\u0275\u0275text(8),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"ion-card-subtitle",9),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(11,"ion-card",10)(12,"ion-row")(13,"ion-col",11)(14,"h4"),t.\u0275\u0275text(15,"Main balance"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"h1",12),t.\u0275\u0275element(17,"img",13),t.\u0275\u0275text(18),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(19,"ion-grid",14)(20,"ion-row")(21,"ion-col",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const e=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(e.topUp())}),t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(22,"svg",16),t.\u0275\u0275element(23,"path",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275namespaceHTML(),t.\u0275\u0275elementStart(24,"p",18),t.\u0275\u0275text(25,"Top up"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(26,"ion-col",15),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const e=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(e.withdraw())}),t.\u0275\u0275namespaceSVG(),t.\u0275\u0275elementStart(27,"svg",16),t.\u0275\u0275element(28,"path",19),t.\u0275\u0275elementEnd(),t.\u0275\u0275namespaceHTML(),t.\u0275\u0275elementStart(29,"p",18),t.\u0275\u0275text(30,"Withdraw"),t.\u0275\u0275elementEnd()()()()()()()(),t.\u0275\u0275elementStart(31,"div",20)(32,"h4"),t.\u0275\u0275text(33,"Latest Transactions"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(34,"p",21),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const e=t.\u0275\u0275nextContext();return t.\u0275\u0275resetView(e.goToWalletHistory())}),t.\u0275\u0275text(35,"View all"),t.\u0275\u0275elementEnd()(),t.\u0275\u0275template(36,v,18,8,"div",22),t.\u0275\u0275elementEnd()()}if(2&i){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(5),t.\u0275\u0275property("src",n.currentUser.profilePicture,t.\u0275\u0275sanitizeUrl),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate(n.currentUser.userName),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",null!=n.currentUser&&n.currentUser.isSocialLogin?"Social Login":"Regular User"," "),t.\u0275\u0275advance(8),t.\u0275\u0275textInterpolate1("",n.mybalance," "),t.\u0275\u0275advance(18),t.\u0275\u0275property("ngForOf",n.selectedTransactions)}}function y(i,l){1&i&&(t.\u0275\u0275elementStart(0,"ion-content")(1,"h2"),t.\u0275\u0275text(2,"No Data found"),t.\u0275\u0275elementEnd()())}let w=(()=>{var i;class l{constructor(o,e,c,g,s){this.router=o,this.modalCtrl=e,this.commonService=c,this.localStr=g,this.handleData=s,this.properBalance=0,this.transactions=[],this.numberOfTransactions=5,this.topUpClicked="topUpClicked",this.withdrawClicked="withdrawClicked",this.wallet={balance:0,transactions:{id:"",date:"",amount:0,type:"",status:"",paidTo:""},transactionsList:[]},this.currentUser=""}ngOnInit(){console.log()}ionViewWillEnter(){this.handleData.userExists(this.commonService.currentUserEmail).then(e=>{if(console.log("res.data === ",e.data),this.currentUserData=e.data,console.log("current user data",this.currentUserData),this.currentUser=e.data,this.currentUser){this.userData=this.currentUser;const c=Object.keys(this.currentUser).length;console.log("currentUser length: ",c),this.userDataLength=c,console.log("currentUser: ",this.currentUser);const g=this.localStr.getItem("currentUserDocId");if(console.log("this.currentUser.wallet.balance === ",this.currentUser.wallet.balance),null!=this.currentUser.wallet.balance){console.log("yes it has balance "),this.wallet.balance=this.currentUser.wallet.balance,this.wallet={balance:this.currentUser.wallet.balance},this.mybalance=this.wallet.balance.toFixed(2).toString(),console.log(" this.mybalance === ",this.mybalance);let s=this.mybalance.split(".");console.log("parts === ",s),s[0]=s[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");let E=s.join(".");this.mybalance=E,console.log(" this.mybalance",this.mybalance)}else console.log("you have to create it "),this.handleData.updateDocumentField(g,"wallet",this.wallet)}else console.error("Error: currentUser data not found in local storage.");this.transactionList=this.currentUserData.wallet.transactionsList,console.log("transition list",this.transactionList),this.selectedTransactions=this.transactionList.slice(0,this.numberOfTransactions)}).catch(e=>{console.error("Error: ",e)})}goToWalletHistory(){this.router.navigate(["/wallet-history"])}topUp(){this.router.navigate(["/top-withdraw"],{state:{operation:this.topUpClicked}})}withdraw(){this.router.navigate(["/top-withdraw"],{state:{operation:this.withdrawClicked}})}walletToRecipt(o){var e=this;return(0,m.A)(function*(){const c=e.selectedTransactions[o];(yield e.modalCtrl.create({component:h.f,cssClass:["ReciptComponentCss","ion-padding-horizontal"],componentProps:{userpaymentDetails:c}})).present()})()}}return(i=l).\u0275fac=function(o){return new(o||i)(t.\u0275\u0275directiveInject(u.Ix),t.\u0275\u0275directiveInject(a.W3),t.\u0275\u0275directiveInject(f.h),t.\u0275\u0275directiveInject(M.s),t.\u0275\u0275directiveInject(x.K))},i.\u0275cmp=t.\u0275\u0275defineComponent({type:i,selectors:[["app-my-wallet"]],standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:8,vars:3,consts:[["debitIcon",""],[3,"translucent"],["slot","start"],[4,"ngIf"],[1,"main-content","ion-no-margin"],[1,"features-box"],[1,"photo"],["alt","User Photo",3,"src"],[1,"detail"],["color","light"],[1,"balance-card-container"],["size","12",1,"balance-card"],[1,"rupiya-icon"],["src","../../../assets/images/svgs/rupiya.svg","alt",""],[1,"actions"],[1,"action",3,"click"],["width","16","height","16","viewBox","0 0 16 16","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M2 12.6667H14V14H2V12.6667ZM8.66667 8.78137L12.714 4.73337L13.6567 5.67604L8 11.3334L2.34333 5.67671L3.286 4.73337L7.33333 8.78004V1.33337H8.66667V8.78137Z","fill","white"],[1,"ion-no-margin"],["d","M2 12.6667H14V14H2V12.6667ZM8.66667 3.88537V11.3334H7.33333V3.88537L3.286 7.93337L2.34333 6.99071L8 1.33337L13.6567 6.99004L12.714 7.93271L8.66667 3.88671V3.88537Z","fill","white"],[1,"ion-fx","ion-justify-content-between","ion-padding-top"],[1,"viewall","text-gray",3,"click"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["size","12"],[1,"ion-no-margin","ion-no-padding"],[1,"ion-no-padding","transaction-card"],[4,"ngIf","ngIfElse"],[1,"ion-no-padding","ion-padding-start"],[1,"ion-padding-end"],["width","6","height","10","viewBox","0 0 6 10","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.78132 4.99999L0.481323 1.69999L1.42399 0.757324L5.66666 4.99999L1.42399 9.24266L0.481323 8.29999L3.78132 4.99999Z","fill","#535D66"],[1,"svgbg"],["src","../../../../assets/images/svgs/credit.svg","alt","Credit",1,"credit-icon"],["src","../../../../assets/images/svgs/debit.svg","alt","Debit",1,"debit-icon"]],template:function(o,e){1&o&&(t.\u0275\u0275elementStart(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-buttons",2),t.\u0275\u0275element(3,"ion-menu-button"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-title"),t.\u0275\u0275text(5,"My Wallet"),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275template(6,O,37,5,"ion-content",3)(7,y,3,0,"ion-content",3)),2&o&&(t.\u0275\u0275property("translucent",!0),t.\u0275\u0275advance(6),t.\u0275\u0275property("ngIf",e.userDataLength>0),t.\u0275\u0275advance(),t.\u0275\u0275property("ngIf",0===e.currentUser.length))},dependencies:[a.QW,a.nf,a.lO,a.ln,a.hU,a.he,a.IO,a.uz,a.b_,a.tN,a.HW,a.mC,a.W9,a.eU,a.BC,a.ai,d.MD,d.Sq,d.bT,d.vh,p.YN,a.MC],styles:[".photo[_ngcontent-%COMP%]{display:flex;align-items:center}.photo[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:5px}.photo[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{margin-left:10px;color:#fff}ion-card-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-inline-end:12px}.ion-fx[_ngcontent-%COMP%]{display:flex}.main-content[_ngcontent-%COMP%]{padding:16px}.features-box[_ngcontent-%COMP%]{background:#1cd8d2;background:linear-gradient(to right,#1cd8d2,#93edc7);padding:1rem;border-radius:15px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;text-align:center;background-color:#6f45e9;padding:16px;border-radius:8px;color:#fff}.profile-avatar[_ngcontent-%COMP%]{width:40px;height:40px}.balance-card[_ngcontent-%COMP%]{border-radius:12px;color:#fff;padding:16px;text-align:center}.balance-card-container[_ngcontent-%COMP%]{background-color:#6a61a1;background:#50c9c3;background:-webkit-linear-gradient(to right,#50c9c3,#96deda)}.balance-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;margin:8px 0}.ion-img[_ngcontent-%COMP%]{width:2rem}.actions[_ngcontent-%COMP%]{margin-top:16px}.action[_ngcontent-%COMP%]{text-align:center}.transfers-scroll[_ngcontent-%COMP%]{display:flex}.transfers[_ngcontent-%COMP%]{display:flex;align-items:center}.transfer-avatar[_ngcontent-%COMP%]{width:50px;height:50px;margin-right:10px}.transfer-avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3em}ion-list[_ngcontent-%COMP%]{background:#fff;border-radius:8px;margin-top:8px}ion-item[_ngcontent-%COMP%]{--background: none}ion-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}ion-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9em;color:gray}ion-item[_ngcontent-%COMP%]   ion-text[_ngcontent-%COMP%]{font-size:1em}.transaction-card[_ngcontent-%COMP%]{gap:1rem}.rupiya-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2rem}.rupiya-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.transaction-box[_ngcontent-%COMP%]{padding:0 1rem}  .item-inner{padding:0}.svgbg[_ngcontent-%COMP%]{background-color:#f6f6f6;border-radius:1.5rem;display:flex;padding:.3rem;align-items:center}"]}),l})()}}]);