"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[711],{7711:(v,l,o)=>{o.r(l),o.d(l,{TopWithdrawPage:()=>w});var u=o(467),t=o(3953),h=o(177),i=o(4341),a=o(1019),m=o(8986),p=o(9520),_=o(2672),g=o(3724);let w=(()=>{var s;class d{constructor(n,e){this.router=n,this.alertController=e,this.handleData=(0,t.inject)(m.K),this.localStorageService=(0,t.inject)(_.s),this.commonService=(0,t.inject)(p.h),this.email=this.commonService.currentUserEmail,this.users=[],this.transaction_data=[],this.updatedBalance=new t.EventEmitter}ngOnInit(){const n=this.router.getCurrentNavigation();null!=n&&n.extras.state&&(this.operation=n.extras.state.operation,console.log("Operation:",this.operation))}ionViewWillEnter(){const n=this.localStorageService.getItem("currentUserDocId");console.log("currentUserDocId === ",n),this.handleData.userExists(this.email).then(e=>{e.isExist?(this.handleData.user=e.data,console.log("User data:",e.data),this.userdata=e.data,this.userBalance=this.userdata.wallet.balance,console.log("  this.userdet === ",this.userdata)):console.log("User not found")}).catch(e=>{console.error("Error:",e)})}addMoney(){if(this.amountToAdd>0){const n=this.localStorageService.getItem("currentUserDocId");this.userBalance+=this.amountToAdd,this.userdata.wallet.balance=this.userBalance,this.userdata.wallet.transactions.id=Math.random().toString(),this.userdata.wallet.transactions.paidTo=this.userdata.userName,this.userdata.wallet.transactions.amount=this.amountToAdd,this.userdata.wallet.transactions.date=(new Date).toISOString(),this.userdata.wallet.transactions.status="recieve",this.userdata.wallet.transactions.type="credit";const e=Object.freeze({...this.userdata.wallet.transactions});this.userdata.wallet.transactionsList.unshift(e),this.handleData.updateDocumentField(n,"wallet",this.userdata.wallet),this.amountToAdd=null}else this.presentInvalidAmountAlert()}withdrawMoney(){if(this.amountToAdd>0&&this.amountToAdd<=this.userBalance&&this.amountToAdd<2e4){const n=this.localStorageService.getItem("currentUserDocId");this.userBalance-=this.amountToAdd,this.userdata.wallet.balance=this.userBalance,this.userdata.wallet.transactions.id=Math.random().toString(),this.userdata.wallet.transactions.paidTo=this.userdata.userName,this.userdata.wallet.transactions.amount=this.amountToAdd,this.userdata.wallet.transactions.date=(new Date).toISOString(),this.userdata.wallet.transactions.status="paid",this.userdata.wallet.transactions.type="debit";const e=Object.freeze({...this.userdata.wallet.transactions});this.userdata.wallet.transactionsList.unshift(e),this.handleData.updateDocumentField(n,"wallet",this.userdata.wallet),this.amountToAdd=null}else this.presentInvalidAmountAlert()}presentInvalidAmountAlert(){var n=this;return(0,u.A)(function*(){yield(yield n.alertController.create({header:"Invalid Amount",message:"Please enter a valid amount.",buttons:["OK"]})).present()})()}goToWalletHistory(){this.router.navigate(["/wallet-history"])}}return(s=d).\u0275fac=function(n){return new(n||s)(t.\u0275\u0275directiveInject(g.Ix),t.\u0275\u0275directiveInject(a.hG))},s.\u0275cmp=t.\u0275\u0275defineComponent({type:s,selectors:[["app-top-withdraw"]],outputs:{updatedBalance:"updatedBalance"},standalone:!0,features:[t.\u0275\u0275StandaloneFeature],decls:25,vars:5,consts:[["slot","start"],[1,"ion-padding"],[1,"custom-font-subtitle"],[1,"custom-font-title"],["lines","none","color","",1,"ion-no-padding","custom-font-subtitle"],["name","wallet","slot","end","color","light",1,"custom-icon-size"],["lines","none ion-no-padding"],["type","number","inputmode","numeric","placeholder","Enter amount","pattern","[0-9]*","required","",1,"input-box","ion-no-padding",3,"ngModelChange","ngModel"],["src","../../../assets/images/svgs/rupiya.svg","alt","","slot","start"],["expand","block","color","primary",1,"ion-margin-top","next-btn",3,"click"]],template:function(n,e){1&n&&(t.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),t.\u0275\u0275element(3,"ion-back-button"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"ion-title"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(6,"ion-content",1),t.\u0275\u0275elementContainerStart(7),t.\u0275\u0275elementStart(8,"ion-card",1)(9,"ion-card-header")(10,"ion-card-subtitle",2),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"ion-card-title",3),t.\u0275\u0275text(13,"Wallet"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(14,"ion-item",4)(15,"ion-label"),t.\u0275\u0275text(16),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(17,"ion-icon",5),t.\u0275\u0275elementEnd()(),t.\u0275\u0275elementStart(18,"ion-card-content")(19,"ion-list")(20,"ion-item",6)(21,"ion-input",7),t.\u0275\u0275twoWayListener("ngModelChange",function(r){return t.\u0275\u0275twoWayBindingSet(e.amountToAdd,r)||(e.amountToAdd=r),r}),t.\u0275\u0275element(22,"img",8),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementStart(23,"ion-button",9),t.\u0275\u0275listener("click",function(){return"topUpClicked"===e.operation?e.addMoney():e.withdrawMoney()}),t.\u0275\u0275text(24),t.\u0275\u0275elementEnd()()(),t.\u0275\u0275elementContainerEnd(),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1(" ","topUpClicked"===e.operation?"Add Money to Wallet":"Withdraw Money From Wallet"," "),t.\u0275\u0275advance(6),t.\u0275\u0275textInterpolate1(" ","topUpClicked"===e.operation?"Add Money to":"Withdraw Money from",""),t.\u0275\u0275advance(5),t.\u0275\u0275textInterpolate1("Available Balance \u20b9 ",e.userBalance,""),t.\u0275\u0275advance(5),t.\u0275\u0275twoWayProperty("ngModel",e.amountToAdd),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ","topUpClicked"===e.operation?"Proceed to Add Money":"Proceed to Withdraw Money"," "))},dependencies:[a.nf,a.$w,a.uz,a.I9,a.he,a.tN,a.HW,a.ME,a.b_,a.Jm,a.el,a.iq,a.QW,a.W9,a.eU,a.BC,a.ai,h.MD,i.YN,i.BC,i.YS,i.R_,i.vS],styles:[".wallet-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.custom-icon-size[_ngcontent-%COMP%]{font-size:2rem;background:#80808085;border-radius:20px;padding:.3rem}.custom-avatar-bg[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:#0054e9}.custom-avatar-bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:18px;height:1.5rem}.custom-font-subtitle[_ngcontent-%COMP%]{font-size:18px}.custom-font-title[_ngcontent-%COMP%]{font-size:24px}ion-input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1rem}.input-box[_ngcontent-%COMP%]{border-bottom:3px solid blue;font-size:30px}.input-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{filter:invert(1);width:2rem}.next-btn[_ngcontent-%COMP%]{font-size:17px}.viewAll[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 1rem}"]}),d})()}}]);